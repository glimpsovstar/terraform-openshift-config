replicaCount: 1
image:
 repository: images.releases.hashicorp.com
 name: hashicorp/terraform-enterprise
 tag: v202406-1
serviceAccount:
  annotations: 
    eks.amazonaws.com/role-arn: arn:aws:iam::855831148133:role/testtfe-tfe-eks-irsa-role-ap-southeast-2
service:
  annotations:
    service.beta.kubernetes.io/aws-load-balancer-type: nlb
    service.beta.kubernetes.io/aws-load-balancer-nlb-target-type: "ip"
    service.beta.kubernetes.io/aws-load-balancer-backend-protocol: "tcp"
    service.beta.kubernetes.io/aws-load-balancer-internal: "true"
    service.beta.kubernetes.io/aws-load-balancer-subnets: "subnet-0d9fbe93366e5c075,subnet-0256db40892188249,subnet-04caeb8061674b68c"
    #service.beta.kubernetes.io/aws-load-balancer-security-groups: # not applicable with NLB here
  type: LoadBalancer
  ports:
    - port: 443
      protocol: TCP
      targetPort: 443
      name: https-443
tls:
  certificateSecret: tfe-certs
  caCertData: |
    LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tDQpNSUlGRXpDQ0EvdWdBd0lCQWdJU0ExWTJDMloveVRhcDA1a2RlK2FZS0dJL01BMEdDU3FHU0liM0RRRUJDd1VBDQpNRE14Q3pBSkJnTlZCQVlUQWxWVE1SWXdGQVlEVlFRS0V3MU1aWFFuY3lCRmJtTnllWEIwTVF3d0NnWURWUVFEDQpFd05TTVRBd0hoY05NalF3TnpFeE1EUXpOalF4V2hjTk1qUXhNREE1TURRek5qUXdXakFzTVNvd0tBWURWUVFEDQpFeUYwWm1VdWMybHRiMjR0YkhsdVkyZ3VjMko0TG1oaGMyaHBaR1Z0YjNNdWFXOHdnZ0VpTUEwR0NTcUdTSWIzDQpEUUVCQVFVQUE0SUJEd0F3Z2dFS0FvSUJBUUNjbHhOWXpRN3oxUFAyUDR0eHZVZTBZUDlmdXRqOWNwc2xPaEpvDQpYUEFETjU3blBVQkRTd1huTnBzRVB5MlgxN1dKK2FTb29QT1JoWXllMEpHTXU2dW8zNDFKUEJhdGhLMEJBeURVDQpLN2V5a215dHpVR3p6dUJWbjJGekpiY1pYSXJHMHlaSDBkdUVtTnhEZkJlS0x6UlJZTURjTjhSa0FDMEI5NkRTDQpPTENmVURqd3lZTDQ1MjY4M0ZOQXFPV01aWWpvYlJNZUVmZWhFRS8zaGlMOTkvRGhZZlpYaVZMRzJxSTZUQ3pqDQo5cWNZRmQ5K2JPbmdaMVZWNVNnQzJnb2lUNlVtaXQvRGNzZHIzSGpBSGxxSnR3UEkrRTR3VkplZk1OQVZLRjNlDQo5clh2a0lsaEZ1dW1mWXAxckJYNFNrRTQra0NhSVNNUUNhSHRZckdINlRDdXhXQURBZ01CQUFHamdnSW1NSUlDDQpJakFPQmdOVkhROEJBZjhFQkFNQ0JhQXdIUVlEVlIwbEJCWXdGQVlJS3dZQkJRVUhBd0VHQ0NzR0FRVUZCd01DDQpNQXdHQTFVZEV3RUIvd1FDTUFBd0hRWURWUjBPQkJZRUZETEFXQTlpUHFDcm5zdjlXNEMzR2p1Y3UwbjlNQjhHDQpBMVVkSXdRWU1CYUFGTHU4dzBlbDVMeXB4c09rY2d3UWphSTE0Y2pvTUZjR0NDc0dBUVVGQndFQkJFc3dTVEFpDQpCZ2dyQmdFRkJRY3dBWVlXYUhSMGNEb3ZMM0l4TUM1dkxteGxibU55TG05eVp6QWpCZ2dyQmdFRkJRY3dBb1lYDQphSFIwY0RvdkwzSXhNQzVwTG14bGJtTnlMbTl5Wnk4d0xBWURWUjBSQkNVd0k0SWhkR1psTG5OcGJXOXVMV3g1DQpibU5vTG5OaWVDNW9ZWE5vYVdSbGJXOXpMbWx2TUJNR0ExVWRJQVFNTUFvd0NBWUdaNEVNQVFJQk1JSUJCUVlLDQpLd1lCQkFIV2VRSUVBZ1NCOWdTQjh3RHhBSGNBUHhkTFQ5Y2lSMWlVSFdVY2hMNE5FdTJRTjM4ZmhXcnJ3YjhvDQpoZXo0Wkc0QUFBR1FvRXMxVndBQUJBTUFTREJHQWlFQXdvV2pIbTJDME1yN3BWaFRBWWp5OE5KeXFmQWdxeDhyDQp2eWs4aXdUaWxUa0NJUUNrbnY5QUl1V2dMMTJJK2N0cG5BSWZ3UjdVTExidWMzbjZnYmFGYjhUUzZ3QjJBTzdODQowR1RWMnhyT3hWeTNuYlRORTZJeWgwWjh2T3pldzFGSVdVWnhIN1diQUFBQmtLQkxOVk1BQUFRREFFY3dSUUlnDQpDUmN1N2JEYTlPTXNnaHMvOERRUUd3cnN0UTF2bDMxZ0hyMEoyTHJPZ2xvQ0lRRHplOG9iMDEwbkhzRUZaYlJlDQprNkdVMGxiOFVBOGZBTVAxS1NISE9wcHBuekFOQmdrcWhraUc5dzBCQVFzRkFBT0NBUUVBbVRjMVc1a09QNmRJDQpWaTk3WFpLYUZJallSWVdnWnRPZEFNNjVRS3FHbnZ1QWhWdDFjdkFwYVlKeHkyQmZPdmVYRmo4MEYyajJER2gwDQorWEM0dVRLNFp1RmFMMUQrUi9qQnVaaSt0amt6bzRYQmc3ZU0rOFI5RWNFaXJTVXdNeDVua2JUZFdMTkVUTFJwDQpvWVFmWmxIQi94N05MMEpLc0gzeHBDL3dudk1FUHdZa3hyRS92RkZsbnpjNlp3WkIzRm1sbXFIQ0trUFVZaTJqDQpLZjNiRTB5Y290eVRFQlN5eU52cDU0OUYrY2o3T2VBdlJSK0ZyRkJwMm1SdHNidHQvQi8yd1YvOUlDRU5FWlNRDQp5Z2M3UHUxbmFUaFRZSFNSaHJWZTRGMUZCeWUzRzJUQTh1MzI1Z3dCd2hRdWNCNHdpaHFRcW5HR01QQ05nZ1dQDQpqZ2pKVGQ2eEhRPT0NCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0NCi0tLS0tQkVHSU4gQ0VSVElGSUNBVEUtLS0tLQ0KTUlJRkJUQ0NBdTJnQXdJQkFnSVFTNmhTay9lYUw2SnpCa3VvQkkxMTBEQU5CZ2txaGtpRzl3MEJBUXNGQURCUA0KTVFzd0NRWURWUVFHRXdKVlV6RXBNQ2NHQTFVRUNoTWdTVzUwWlhKdVpYUWdVMlZqZFhKcGRIa2dVbVZ6WldGeQ0KWTJnZ1IzSnZkWEF4RlRBVEJnTlZCQU1UREVsVFVrY2dVbTl2ZENCWU1UQWVGdzB5TkRBek1UTXdNREF3TURCYQ0KRncweU56QXpNVEl5TXpVNU5UbGFNRE14Q3pBSkJnTlZCQVlUQWxWVE1SWXdGQVlEVlFRS0V3MU1aWFFuY3lCRg0KYm1OeWVYQjBNUXd3Q2dZRFZRUURFd05TTVRBd2dnRWlNQTBHQ1NxR1NJYjNEUUVCQVFVQUE0SUJEd0F3Z2dFSw0KQW9JQkFRRFBWK1hteEZRUzdiUkgvc2tuV0haR1VDaU1IVDZJM3dXZDFiVVlLYjNkdFZxLyt2Yk9vNzZ2QUNGTA0KWWxwYVBBRXZ4VmdEOW9uL2poRkQ2OEcxNEJRSGxvOXZIOWZudW9FNUNYVmx0OEt2R0ZzM0ppam5vL1FISzIwYQ0KLzZ0WXZKV3VRUC9weTFmRXRWdC9lQTBZWWJ3WDUxVEd1MG1Selc0WTBZQ0Y3cVpsTnJ4MDZyeFFUT3I4SWZNNA0KRnBPVXVyRFRhemdHelJZU2VzcFNkY2l0ZHJMQ25GMllSVnh2WVh2R0xlNDhFMUtHQWRsWDVqZ2MzNDIxSDVLUg0KbXVkS0hNeEZxSEpWOExEbW93ZnMvYWNiWnA0L1NJdHhoSEZZeVRyNjcxN3lXMFFyUEhUbmo3Skh3UWRxelpxMw0KRFpiM0VvRW1VVlFLN0dIMjkvWGk4b3JJbFEyTkFnTUJBQUdqZ2Znd2dmVXdEZ1lEVlIwUEFRSC9CQVFEQWdHRw0KTUIwR0ExVWRKUVFXTUJRR0NDc0dBUVVGQndNQ0JnZ3JCZ0VGQlFjREFUQVNCZ05WSFJNQkFmOEVDREFHQVFILw0KQWdFQU1CMEdBMVVkRGdRV0JCUzd2TU5IcGVTOHFjYkRwSElNRUkyaU5lSEk2REFmQmdOVkhTTUVHREFXZ0JSNQ0KdEZubWU3Ymw1QUZ6Z0FpSXlCcFk5dW1iYmpBeUJnZ3JCZ0VGQlFjQkFRUW1NQ1F3SWdZSUt3WUJCUVVITUFLRw0KRm1oMGRIQTZMeTk0TVM1cExteGxibU55TG05eVp5OHdFd1lEVlIwZ0JBd3dDakFJQmdabmdRd0JBZ0V3SndZRA0KVlIwZkJDQXdIakFjb0JxZ0dJWVdhSFIwY0RvdkwzZ3hMbU11YkdWdVkzSXViM0puTHpBTkJna3Foa2lHOXcwQg0KQVFzRkFBT0NBZ0VBa3JIblFUZnJlWjJCNXMzaUplRTZJT21RUkpXamdWelB3MTM5dmFCdzFiR1dLQ0lMMHZJbw0Kend6bjFPWkRqQ1FpSGNGQ2t0RUpyNTlMOU1od1R5QVdzVnJkQWZZZitCOWhheFFuc0hLTlk2N3U0czVMenpmZA0KdTZQVXplZXRVSzI5ditQc1BtSTJjSmt4cCtpTjNlcGk0aEt1OVp6VVBTd01xdENjZWI3cVBWeEVicFl4WTFwOQ0KMW41UEpLQkxCWDllYjlMVTZsOHpTeFBXVjdiSzNsRzRYYU1KZ25UOXgzaWVzN21zRnRwS0s1YkR0b3Rpai9sMA0KR2FLZUE5N3BiNXV3RDlLZ1d2YUZYTUlFdDhqVlRqTEV2d1JkdkNuMjk0R1BERjA4VThsQWtJdjd0Z2hsdWFRaA0KMVFubEU0U0VONExPRUNqOGRzSUdKWHBHVWszYVUzS2tKejlpY0t5K2FVZ0ErMmNQMjF1aDZOY0RJUzNYeWZhWg0KUWptRFE5OTNDaElJOFNYV3VwUVpWQmlJcGNXTzRScVprM2xyN0J6NU1VQ3d6RElBMzU5ZTU3U1NxNUNDa1kwTg0KNEI2VnVsazdMa3Rmd3JkR05WSTVCc0M5cXF4U3dTS2dSSmVaOXd5Z0lhZWhiSEZIRmhjQmFNREtwaVpsQkh5eg0KcnNubmxGWENiNXM4SEtuNUxzVWdHdkIyNEw3c0dOWlAyQ1g3ZGhIb3YrWWhEK2pvekxXMnA5VzQ5NTlCejJFaQ0KUm1xRHRtaVhMbnpxVHBYYkkrc3V5Q3NvaEtSZzZVbjBSQzQ3K2NwaVZ3SGlYWkFXK2NuOGVpTklqcWJWZ1hMeA0KS1BwZHp2dnRUbk9QbEM3U1FaU1ltZHVucjNCZjliNzdBaUMvWmlkc3RLMzZkUklMS3o3T0E1ND0NCi0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0=
env:
  secretRefs:
    - name: tfe-secrets
  
  variables:
    # TFE config settings
    TFE_HOSTNAME: tfe.simon-lynch.sbx.hashidemos.io

    # Database settings
    TFE_DATABASE_HOST: testtfe-tfe-rds-cluster-ap-southeast-2.cluster-ckfdrh72yimx.ap-southeast-2.rds.amazonaws.com:5432
    TFE_DATABASE_NAME: tfe
    TFE_DATABASE_USER: tfe
    TFE_DATABASE_PARAMETERS: sslmode=require

    # Object storage settings
    TFE_OBJECT_STORAGE_TYPE: s3
    TFE_OBJECT_STORAGE_S3_BUCKET: testtfe-tfe-app-ap-southeast-2-855831148133
    TFE_OBJECT_STORAGE_S3_REGION: ap-southeast-2
    TFE_OBJECT_STORAGE_S3_USE_INSTANCE_PROFILE: true
    TFE_OBJECT_STORAGE_S3_SERVER_SIDE_ENCRYPTION: AES256
    TFE_OBJECT_STORAGE_S3_SERVER_SIDE_ENCRYPTION_KMS_KEY_ID: 

    # Redis settings
    TFE_REDIS_HOST: master.testtfe-tfe-redis-cluster.yeo1ox.apse2.cache.amazonaws.com
    TFE_REDIS_USE_AUTH: true
    TFE_REDIS_USE_TLS: true

    # Observability settings
    TFE_METRICS_ENABLE: false
    TFE_METRICS_HTTP_PORT: 9090
    TFE_METRICS_HTTPS_PORT: 9091
    